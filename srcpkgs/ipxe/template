# Template file for 'ipxe'
pkgname=ipxe
version=1.21.1
revision=1
build_style=gnu-makefile
make_use_env=yes
restricted="No, but THIS PACKAGE MUST NEVER BE MERGED TO VOID PACKAGES"
build_wrksrc=src
make_build_args="EMBED=undionly.ipxe"
make_build_target="bin/undionly.kpxe"
hostmakedepends="perl"
makedepends="liblzma-devel"
short_desc="Open Source Boot Firmware"
maintainer="Toyam Cox <Vaelatern@voidlinux.org>"
license="GPL-2.0-only"
homepage="https://ipxe.org/"
distfiles="https://github.com/ipxe/ipxe/archive/v${version}.tar.gz"
checksum=16e8d51c48d8a120332cf0dc32b473acc5d179e3975ced208eb21caf3b6528dc

pre_build() {
	cp "${FILESDIR}/undionly.ipxe" undionly.ipxe
}

do_install() {
	vmkdir usr/share/ipxe
	vinstall bin/undionly.kpxe 444 usr/share/ipxe
}
